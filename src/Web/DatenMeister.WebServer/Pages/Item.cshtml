@page "/Item/{workspace}/{itemUrl}"
@namespace DatenMeister.WebServer.Pages
@using System.Web
@model ItemModel

@{
    Layout = "~/Shared/_Layout.cshtml";
    ViewData["Title"] = "Der DatenMeister - Item";
}

<h1>Item</h1>

<div id="dm-viewmode-selection-container">
    
</div>

<div class="dm-breadcrumb">
    @{ var w = Model.Workspace ?? "No Workspace"; }
    <a href="/Item/Management/dm%3A%2F%2F%2F_internal%2Fworkspaces/@(HttpUtility.UrlEncode(w))">@w</a> &lt;
    <a href="/ItemsOverview/@(HttpUtility.UrlEncode(w))/@(HttpUtility.UrlEncode(Model.ExtentUrl))">@Model.ExtentUrl</a> &lt;
    @("Element" ?? "Unknown Element")
</div>

<script type="application/javascript">

$(function()
{
    requirejs(['forms/ObjectForm'], function(Form) {
        const detailForm = new Form.ObjectFormCreatorForItem();
        detailForm.createForm(
            {
                itemContainer: $("#form_view"),
                viewModeSelectorContainer: $("#dm-viewmode-selection-container")
            },
            "@HttpUtility.JavaScriptStringEncode(w)",
            "@HttpUtility.JavaScriptStringEncode(Model.ItemUrl)");
    });
});
    
</script>
<div id="form_view">Loading the form</div>

<div class="accordion" id="debug_accordion">
    <div class="accordion-item">
        <h2 class="accordion-header" id="debug_mofelement_heading">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#debug_mofelement_body" aria-expanded="true" aria-controls="collapseOne">
                Element
            </button>
        </h2>
        <div id="debug_mofelement_body" class="accordion-collapse collapse" aria-labelledby="debug_mofelement_heading" data-bs-parent="#debug_accordion">
            <div class="accordion-body" id="debug_mofelement">
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="debug_formelement_heading">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#debug_formelement_body" aria-expanded="true" aria-controls="collapseOne">
                Form
            </button>
        </h2>
        <div id="debug_formelement_body" class="accordion-collapse collapse" aria-labelledby="debug_formelement_heading" data-bs-parent="#debug_accordion">
            <div class="accordion-body" id="debug_formelement">
            </div>
        </div>
    </div>
</div>